<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/component/proximity_monitor - Space Station 13</title></head><body><header><a href="index.html">Space Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/component/proximity_monitor.html#var">Var Details</a> - <a href="datum/component/proximity_monitor.html#proc">Proc Details</a></header><main><h1>Basic Proximity Monitor <aside>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/proximity_monitor.html">proximity_monitor</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L9"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 9"></a></h1><p>Attaching this component to an atom means that the atom will be able to detect mobs or objects moving within a specified radius of it.</p>
<p>The component creates several <a href="obj/effect/abstract/proximity_checker.html" title="/obj/effect/abstract/proximity_checker">/obj/effect/abstract/proximity_checker</a> objects, which follow the <code>parent</code> AKA <code>hasprox_receiver</code> around, always making sure it's at the center.
When something crosses one of these proximiy checkers, the <code>hasprox_receiver</code> will have the <code>HasProximity()</code> proc called on it, with the crossing mob/obj as the argument.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/component/proximity_monitor.html#var/always_active">always_active</a></th><td>Should the parent always detect proximity and update the field on movement, even if it's not on a turf?</td></tr><tr><th><a href="datum/component/proximity_monitor.html#var/field_checker_type">field_checker_type</a></th><td>The type of checker object that should be used for the main field.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#var/hasprox_receiver">hasprox_receiver</a></th><td>The primary atom the component is attached to and that will be receiving <code>HasProximity()</code> calls. Same as the <code>parent</code>.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#var/nested_receiver_locs">nested_receiver_locs</a></th><td>A list which contains references to movable atoms which the <code>hasprox_receiver</code> has moved into.
Used to handle complex situations where the receiver is nested several layers deep into an object.
For example: inside of a box, that's inside of a bag, which is worn on a human. In this situation there are 3 locations we need to listen to for movement.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#var/proximity_checkers">proximity_checkers</a></th><td>A list of currently created <a href="obj/effect/abstract/proximity_checker.html" title="/obj/effect/abstract/proximity_checker">/obj/effect/abstract/proximity_checker</a> in use with this component.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#var/radius">radius</a></th><td>The radius of the field, in tiles.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/clear_nested_locs">clear_nested_locs</a></th><td>Removes and unregisters signals from all objects currently in the <code>nested_receiver_locs</code> list.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/create_prox_checkers">create_prox_checkers</a></th><td>Called in Initialize(). Generates a set of <a href="obj/effect/abstract/proximity_checker.html" title="/obj/effect/abstract/proximity_checker">proximity checker</a> objects around the parent.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/create_single_prox_checker">create_single_prox_checker</a></th><td>Creates a single proximity checker object, at the given location and of the given type. Adds it to the proximity checkers list.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/map_nested_locs">map_nested_locs</a></th><td>Registers signals to any nested locations the <code>hasprox_receiver</code> is in, excluding turfs, so they can be monitored for movement.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/move_prox_checkers">move_prox_checkers</a></th><td>Relays basic directional movement from the <code>hasprox_receiver</code> or <code>host</code>, to all objects in the <code>proximity_checkers</code> list.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/on_disposal_enter">on_disposal_enter</a></th><td>Called when the receiver or an atom in the <code>nested_receiver_locs</code> list moves into a disposals holder object.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/on_disposal_exit">on_disposal_exit</a></th><td>Called when the receiver or an atom in the <code>nested_receiver_locs</code> list moves out of a disposals holder object.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/on_nested_loc_move">on_nested_loc_move</a></th><td>Called when an atom in <code>nested_receiver_locs</code> list moves, if one exists.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/on_receiver_move">on_receiver_move</a></th><td>Called when the <code>hasprox_receiver</code> moves.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/recenter_prox_checkers">recenter_prox_checkers</a></th><td>Re-centers all of the <code>proximity_checker</code>s around the parent's current location.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/set_radius">set_radius</a></th><td>Specifies a new radius for the field. Creates or deletes proximity_checkers accordingly.</td></tr><tr><th><a href="datum/component/proximity_monitor.html#proc/toggle_checkers">toggle_checkers</a></th><td>Update all of the component's proximity checker's to either become active or not active.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/always_active"><aside class="declaration">var </aside>always_active <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L29"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 29"></a></h3><p>Should the parent always detect proximity and update the field on movement, even if it's not on a turf?</p><h3 id="var/field_checker_type"><aside class="declaration">var </aside>field_checker_type <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L25"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 25"></a></h3><p>The type of checker object that should be used for the main field.</p><h3 id="var/hasprox_receiver"><aside class="declaration">var </aside>hasprox_receiver <aside>– /<a href="atom.html">atom</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L13"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 13"></a></h3><p>The primary atom the component is attached to and that will be receiving <code>HasProximity()</code> calls. Same as the <code>parent</code>.</p><h3 id="var/nested_receiver_locs"><aside class="declaration">var </aside>nested_receiver_locs <aside>– /list</aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L19"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 19"></a></h3><p>A list which contains references to movable atoms which the <code>hasprox_receiver</code> has moved into.
Used to handle complex situations where the receiver is nested several layers deep into an object.
For example: inside of a box, that's inside of a bag, which is worn on a human. In this situation there are 3 locations we need to listen to for movement.</p><h3 id="var/proximity_checkers"><aside class="declaration">var </aside>proximity_checkers <aside>– /list</aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L23"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 23"></a></h3><p>A list of currently created <a href="obj/effect/abstract/proximity_checker.html" title="/obj/effect/abstract/proximity_checker">/obj/effect/abstract/proximity_checker</a> in use with this component.</p><h3 id="var/radius"><aside class="declaration">var </aside>radius <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 21"></a></h3><p>The radius of the field, in tiles.</p><h2 id="proc">Proc Details</h2><h3 id="proc/clear_nested_locs"><aside class="declaration">proc </aside>clear_nested_locs<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L159"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 159"></a></aside></h3><p>Removes and unregisters signals from all objects currently in the <code>nested_receiver_locs</code> list.</p><h3 id="proc/create_prox_checkers"><aside class="declaration">proc </aside>create_prox_checkers<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L225"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 225"></a></aside></h3><p>Called in Initialize(). Generates a set of <a href="obj/effect/abstract/proximity_checker.html" title="/obj/effect/abstract/proximity_checker">proximity checker</a> objects around the parent.</p><h3 id="proc/create_single_prox_checker"><aside class="declaration">proc </aside>create_single_prox_checker<aside>(/<a href="turf.html">turf</a>/T, checker_type)  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L217"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 217"></a></aside></h3><p>Creates a single proximity checker object, at the given location and of the given type. Adds it to the proximity checkers list.</p>
<p>Arguments:</p>
<ul>
<li>turf/T - the turf the checker should be created on</li>
<li>checker_type - the type of <a href="obj/item.html" title="/obj/item">/obj/item/abstract/proximity_checker</a> to create</li>
</ul><h3 id="proc/map_nested_locs"><aside class="declaration">proc </aside>map_nested_locs<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L143"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 143"></a></aside></h3><p>Registers signals to any nested locations the <code>hasprox_receiver</code> is in, excluding turfs, so they can be monitored for movement.</p><h3 id="proc/move_prox_checkers"><aside class="declaration">proc </aside>move_prox_checkers<aside>(move_dir)  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L170"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 170"></a></aside></h3><p>Relays basic directional movement from the <code>hasprox_receiver</code> or <code>host</code>, to all objects in the <code>proximity_checkers</code> list.</p>
<p>Arguments:</p>
<ul>
<li>move_dir - the direction the checkers should move in</li>
</ul><h3 id="proc/on_disposal_enter"><aside class="declaration">proc </aside>on_disposal_enter<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L125"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 125"></a></aside></h3><p>Called when the receiver or an atom in the <code>nested_receiver_locs</code> list moves into a disposals holder object.</p>
<p>This proc receives arguments, but they aren't needed.</p><h3 id="proc/on_disposal_exit"><aside class="declaration">proc </aside>on_disposal_exit<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L135"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 135"></a></aside></h3><p>Called when the receiver or an atom in the <code>nested_receiver_locs</code> list moves out of a disposals holder object.</p>
<p>This proc receives arguments, but they aren't needed.</p><h3 id="proc/on_nested_loc_move"><aside class="declaration">proc </aside>on_nested_loc_move<aside>(/<a href="atom.html">atom</a>/moved_atom, /<a href="atom.html">atom</a>/old_loc, dir)  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L105"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 105"></a></aside></h3><p>Called when an atom in <code>nested_receiver_locs</code> list moves, if one exists.</p>
<p>Arguments:</p>
<ul>
<li>atom/moved_atom - one of the atoms in <code>nested_receiver_locs</code></li>
<li>atom/old_loc - the location <code>moved_atom</code> just moved from</li>
<li>dir - the direction <code>moved_atom</code> just moved in</li>
</ul><h3 id="proc/on_receiver_move"><aside class="declaration">proc </aside>on_receiver_move<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/old_loc, dir)  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L73"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 73"></a></aside></h3><p>Called when the <code>hasprox_receiver</code> moves.</p>
<p>Arguments:</p>
<ul>
<li>datum/source - this will be the <code>hasprox_receiver</code></li>
<li>atom/old_loc - the location the receiver just moved from</li>
<li>dir - the direction the receiver just moved in</li>
</ul><h3 id="proc/recenter_prox_checkers"><aside class="declaration">proc </aside>recenter_prox_checkers<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L241"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 241"></a></aside></h3><p>Re-centers all of the <code>proximity_checker</code>s around the parent's current location.</p><h3 id="proc/set_radius"><aside class="declaration">proc </aside>set_radius<aside>(new_radius)  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L192"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 192"></a></aside></h3><p>Specifies a new radius for the field. Creates or deletes proximity_checkers accordingly.</p>
<p>This proc <em>can</em> have a high cost due to the <code>new</code>s and <code>qdel</code>s of the proximity checkers, depending on the number of calls you need to make to it.</p>
<p>Arguments:
new_radius - the new value that <code>proximity_radius</code> should be set to.</p><h3 id="proc/toggle_checkers"><aside class="declaration">proc </aside>toggle_checkers<aside>(new_active)  <a href="https://github.com/ParadiseSS13/Paradise/blob/9adbe3948ad40c9630db40596a8958a5d940a2cb/code/datums/components/proximity_monitor.dm#L180"><img src="git.png" width="16" height="16" title="code/datums/components/proximity_monitor.dm 180"></a></aside></h3><p>Update all of the component's proximity checker's to either become active or not active.</p>
<p>Arguments:</p>
<ul>
<li>new_active - the value to be assigned to the proximity checker's <code>active</code> variable</li>
</ul></main><footer>paradise.dme <a href="https://github.com/ParadiseSS13/Paradise/tree/9adbe3948ad40c9630db40596a8958a5d940a2cb">9adbe39</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>